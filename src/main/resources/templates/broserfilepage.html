<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>设计文件</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" th:href="@{/lib/bootstrap/css/bootstrap.css}">
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.css">

    <script src="/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
    <!--<script src="/lib/jquery.ui.datepicker-zh-CN.js" type="text/javascript"></script>-->

    <link rel="stylesheet" type="text/css" href="/stylesheets/theme.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/premium.css">
    <link href="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/busy-load/dist/app.min.js"></script>
    <script src="/lib/WdatePicker.js" type="text/javascript"></script>

</head>
<body class=" theme-blue">

<!-- Demo page code -->

<script type="text/javascript">
    $(function () {
        var match = document.cookie.match(new RegExp('color=([^;]+)'));
        if (match) var color = match[1];
        if (color) {
            $('body').removeClass(function (index, css) {
                return (css.match(/\btheme-\S+/g) || []).join(' ')
            })
            $('body').addClass('theme-' + color);
        }
    });
</script>
<style type="text/css">
    #folderdiv {
        border: 1px solid #9AC0CD;
        width: 1148px;
        height: 410px;
        Margin: 2px;
        padding: 3px;
    }
    #innerfolderdiv {
        border: 1px solid #9AC0CD;
        width: 1120px;
        height: 355px;
        Margin: 10px;
        padding: 3px;
    }
    table.grid {
        font-family: verdana, arial, sans-serif;
        font-size: 12px;
        border-width: 1px;
        border-collapse: collapse;
    }
    table.grid th {
        border-width: 1px;
        padding: 3px;
        border-style: solid;
        white-space: nowrap;
    }
    table.grid td {
        border-width: 1px;
        padding: 3px;
        border-style: solid;
        white-space: nowrap;
    }
    #selecradio {
        padding: 8px;
    }
    .navbar-default .navbar-brand, .navbar-default .navbar-brand:hover {
        color: #fff;
    }
</style>

<script type="text/javascript">
    $(function () {
        var uls = $('.sidebar-nav > ul > *').clone();
        uls.addClass('visible-xs');
        $('#main-menu').append(uls.clone());
    });
    function showlistdiv3() {
        $("#listdiv").show();
        $("#folderdiv").hide();
    }
    var topfolder;
    function backFolder3() {
        var foldername = $("#foldername").val();
        var reg = new RegExp(/^[A-Z]{5}[0-9]{8}[A-Z]{2}[0-9]{2}$/g);
        var salor = $("#salor").val();
        var engineer = $("#engineer").val();
        var orderNo = $("#orderno").val().trim();
        var fileInput = $('#file').val();
        var folderhtml = "";
        var fileshtml = "";
        var cominone2 = 0;
        if (salor == "") {
            alert("请选择业务人员!");
            return false;
        }
        if (engineer == "") {
            alert("请选择设计师!");
            return false;
        }
        if (orderNo == "") {
            alert("请填写订单编号!");
            return false;
        }
        $("#some-element").busyLoad("show");//遮罩层开启
        var jsonarray = {
            "salor": salor, //业务员
            "engineer": engineer, //设计师
            "orderNo": orderNo, //订单编号
            "folderName": foldername//当前文件夹名
        };
        var data = JSON.stringify(jsonarray);
        $.ajax({
            data: data,
            type: "POST",
            contentType: "application/json",//上传内容格式为json结构
            url: "/fileupdown/findBackFoldersByQueryParam",
            success: function (msg) {
                var data = eval(msg); //data为URLS
                $.each(data, function (num) {
                    if (data[num].indexOf(".") <= 0) {//代表为文件夹
                        $("#foldername").val(data[num]);
                        if (reg.test(data[num])) {
                            $("#backfolder").attr("disabled", "disabled");
                        }
                        folderhtml += "<li><img src=\"/images/icon/Folder.png\" " +
                            " align=\"middle\" border=\"0\" ondblclick=\"shownextfolderorfiles('" + data[num] + "')\"\n" +
                            " style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num] + "</li>";
                        cominone2 = 1;
                    } else {//代表为文件
                        fileshtml += "<li>" + data[num] + "</li>";
                        if (cominone2 == 0) {//代表没有文件夹
                            $("#foldername").val(data[num]);
                        }
                    }
                });
                $("#innerfolderdiv").html(folderhtml + fileshtml)
            },
            error: function (msg) {
                $("#some-element").busyLoad("hide");
                alert("查询失败");
            }
        });
        $("#some-element").busyLoad("hide");//遮罩层开启
    }
    function showfolderdiv3() {
        var salor = $("#salor").val();
        var engineer = $("#engineer").val();
        var orderNo = $("#orderno").val().trim();
        var fileInput = $('#file').val();
        var filefolder = $('#filefolder').val();
        //做好文件夹切割容器 文件夹层数不能超过9层
        var folderhtml = "";
        var fileshtml = "";
        if (salor == "") {
            alert("请选择业务人员!");
            $("#foldershow").removeAttr("checked");
            $("#listshow").prop("checked", 'checked');
            $("#listdiv").attr("style", "display:block;")
            $("#folderdiv").attr("style", "display:none;")
            return false;
        }
        if (engineer == 0) {
            alert("请选择设计师!");
            $("#foldershow").removeAttr("checked");
            $("#listshow").prop("checked", 'checked');
            $("#listdiv").attr("style", "display:block;")
            $("#folderdiv").attr("style", "display:none;")
            return false;
        }
        if (orderNo == "") {
            alert("请填写订单编号!");
            $("#foldershow").removeAttr("checked");
            $("#listshow").prop("checked", 'checked');
            $("#listdiv").attr("style", "display:block;")
            $("#folderdiv").attr("style", "display:none;")
            return false;
        }
        $("#folderdiv").attr("style", "display:block;")
        $("#listdiv").attr("style", "display:none;")
        $("#some-element").busyLoad("show");//遮罩层开启
        var jsonarray = {
            "salor": salor, //业务员
            "engineer": engineer, //设计师
            "orderNo": orderNo //订单编号
        };
        var data = JSON.stringify(jsonarray);
        $.ajax({
            data: data,
            type: "POST",
            contentType: "application/json",//上传内容格式为json结构
            url: "/fileupdown/findFoldersByQueryParam",
            success: function (msg) {
                var data = eval(msg); //data为URLS
                $.each(data, function (num) {
                    if (data[num].indexOf(".") <= 0) {//代表为文件夹
                        topfolder = data[num];
                        $("#foldername").val(data[num]);
                        folderhtml += "<li><img src=\"/images/icon/Folder.png\" " +
                            " align=\"middle\" border=\"0\" ondblclick=\"shownextfolderorfiles('" + data[num] + "')\"\n" +
                            " style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num] + "</li>";
                    } else {//代表为文件
                        fileshtml += "<li>" + data[num] + "</li>";
                    }
                });
                $("#innerfolderdiv").html(folderhtml + fileshtml)
            },
            error: function (msg) {
                $("#some-element").busyLoad("hide");
                alert("查询失败");
            }
        });
        $("#some-element").busyLoad("hide");//遮罩层开启
    }
    function shownextfolderorfiles(foldername) {
        $("#backfolder").removeAttr("disabled");
        var salor = $("#salor").val();
        var engineer = $("#engineer").val();
        var orderNo = $("#orderno").val().trim();
        var fileInput = $('#file').val();
        var filefolder = $('#filefolder').val();
        var folderhtml = "";
        var fileshtml = "";
        var cominone = 0;
        if (salor == "") {
            alert("请选择业务人员!");
            return false;
        }
        if (engineer == "") {
            alert("请选择设计师!");
            return false;
        }
        if (orderNo == "") {
            alert("请填写订单编号!");
            return false;
        }
        $("#some-element").busyLoad("show");//遮罩层开启
        var jsonarray = {
            "salor": salor, //业务员
            "engineer": engineer, //设计师
            "orderNo": orderNo, //订单编号
            "folderName": foldername//当前文件夹名
        };
        var data = JSON.stringify(jsonarray);
        $.ajax({
            data: data,
            type: "POST",
            contentType: "application/json",//上传内容格式为json结构
            url: "/fileupdown/findNextFoldersByQueryParam",
            success: function (msg) {
                var data = eval(msg); //data为URLS
                $.each(data, function (num) {
                    if (data[num].indexOf(".") <= 0) {//代表为文件夹
                        $("#foldername").val(data[num]);
                        folderhtml += "<li><img src=\"/images/icon/Folder.png\" " +
                            " align=\"middle\" border=\"0\" ondblclick=\"shownextfolderorfiles('" + data[num] + "')\"\n" +
                            " style=\"width: 30px; height: 30px; vertical-align: middle\"/>" + data[num] + "</li>";
                        cominone = 1;
                    } else {//代表为文件
                        fileshtml += "<li>" + data[num] + "</li>";
                        if (cominone == 0) {
                            $("#foldername").val(data[num]);
                        }
                    }
                });
                $("#innerfolderdiv").html(folderhtml + fileshtml)
            },
            error: function (msg) {
                $("#some-element").busyLoad("hide");
                alert("查询失败");
            }
        });
        $("#some-element").busyLoad("hide");//遮罩层开启
    }
</script>

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- Le fav and touch icons -->
<link rel="shortcut icon" href="../assets/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">


<!--[if lt IE 7 ]>
<body class="ie ie6"> <![endif]-->
<!--[if IE 7 ]>
<body class="ie ie7 "> <![endif]-->
<!--[if IE 8 ]>
<body class="ie ie8 "> <![endif]-->
<!--[if IE 9 ]>
<body class="ie ie9 "> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->

<!--<![endif]-->

<div class="navbar navbar-default" role="navigation">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="" href="mainindex.html"><span class="navbar-brand"><span class="fa fa-paper-plane"></span> 深圳柯赛标识工程有限公司</span></a>
    </div>

    <div class="navbar-collapse collapse" style="height: 1px;">
        <ul id="main-menu" class="nav navbar-nav navbar-right">
            <li class="dropdown hidden-xs">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-user padding-right-small" style="position:relative;top: 3px;"
                          th:text="${view.userName}"></span>

                    <i class="fa fa-caret-down"></i>
                </a>

                <ul class="dropdown-menu">
                    <li><a th:href="@{/account/logout}">退出登录</a></li>

                </ul>
            </li>
        </ul>

    </div>
</div>
</div>

<div class="sidebar-nav">
    <ul>
        <li data-popover="fasle"
            data-content="Items in this group require a <strong><a href='http://portnine.com/bootstrap-themes/aircraft' target='blank'>premium license</a><strong>."
            rel="popover" data-placement="right"><a href="#" data-target=".premium-menuforsalor"
                                                    class="nav-header collapsed"
                                                    data-toggle="collapse"><i class="fa fa-fw fa-fighter-jet"></i>
            新建订单<i
                    class="fa fa-collapse"></i></a></li>
        <li>
            <ul class="premium-menuforsalor nav nav-list collapse">
                <li><a href="premium-profile.html"><span class="fa fa-caret-right"></span> 单件商品</a></li>
                <li><a href="premium-blog.html"><span class="fa fa-caret-right"></span> 项目类</a></li>
            </ul>
        </li>

        <!--========================文件管理===============================-->
        <li data-popover="false"
            data-content="Items in this group require a <strong><a href='http://portnine.com/bootstrap-themes/aircraft' target='blank'>premium license</a><strong>."
            rel="popover" data-placement="right"><a href="#" data-target=".premium-menuforfile"
                                                    class="nav-header collapsed"
                                                    data-toggle="collapse"><i class="fa fa-fw fa-fighter-jet"></i> 文件<i
                class="fa fa-collapse"></i></a></li>
        <li>
            <ul class="premium-menuforfile nav nav-list collapse">
                <li>
                    <a th:href="@{/fileupdown/tomainpage(userName=${view.userName},password=${view.password},currentPage=${view.currentPage})}"><span
                            class="fa fa-caret-right"></span> 设计文件</a></li>
                <li><a href="uploadpage.html"><span class="fa fa-caret-right"></span> 规范性文件</a></li>
                <li><a href="uploadpage.html"><span class="fa fa-caret-right"></span> 学习性文件</a></li>
            </ul>
        </li>

        <li data-popover="false"
            data-content="Items in this group require a <strong><a href='http://portnine.com/bootstrap-themes/aircraft' target='blank'>premium license</a><strong>."
            rel="popover" data-placement="right"><a href="#" data-target=".premium-menu" class="nav-header collapsed"
                                                    data-toggle="collapse"><i class="fa fa-fw fa-fighter-jet"></i> 权限<i
                class="fa fa-collapse"></i></a></li>
        <li>
            <ul class="premium-menu nav nav-list collapse">
                <li class="visible-xs visible-sm"><a href="#">- Premium features require a license -</a></span></li>
                <li><a href="premium-profile.html"><span class="fa fa-caret-right"></span> Enhanced Profile</a></li>
                <li><a href="premium-blog.html"><span class="fa fa-caret-right"></span> Blog</a></li>
                <li><a href="premium-blog-item.html"><span class="fa fa-caret-right"></span> Blog Page</a></li>
                <li><a href="premium-pricing-tables.html"><span class="fa fa-caret-right"></span> Pricing Tables</a>
                </li>
                <li><a href="premium-upgrade-account.html"><span class="fa fa-caret-right"></span> Upgrade Account</a>
                </li>
                <li><a href="premium-widgets.html"><span class="fa fa-caret-right"></span> Widgets</a></li>
                <li><a href="premium-timeline.html"><span class="fa fa-caret-right"></span> Activity Timeline</a></li>
                <li><a href="premium-users.html"><span class="fa fa-caret-right"></span> Enhanced Users List</a></li>
                <li><a href="premium-media.html"><span class="fa fa-caret-right"></span> Enhanced Media</a></li>
                <li><a href="premium-invoice.html"><span class="fa fa-caret-right"></span> Invoice</a></li>
                <li><a href="premium-build.html"><span class="fa fa-caret-right"></span> Advanced Tools</a></li>
                <li><a href="premium-colors.html"><span class="fa fa-caret-right"></span> Additional Color Themes</a>
                </li>
            </ul>
        </li>

        <li><a href="#" data-target=".accounts-menu" class="nav-header collapsed" data-toggle="collapse"><i
                class="fa fa-fw fa-briefcase"></i>报表 <span class="label label-info">+3</span></a></li>
        <li>
            <ul class="accounts-menu nav nav-list collapse">
                <li><a href="index.html"><span class="fa fa-caret-right"></span> Sign In</a></li>
                <li><a href="sign-up.html"><span class="fa fa-caret-right"></span> Sign Up</a></li>
                <li><a href="reset-password.html"><span class="fa fa-caret-right"></span> Reset Password</a></li>
            </ul>
        </li>
    </ul>
</div>

<div id="some-element">
    <div class="content">

        <div id="tabs">

            <a class="btn btn-default"
               th:href="@{/fileupdown/tomainpage(userName=${view.userName},password=${view.password},currentPage=${view.currentPage})}">上传</a>
            <a class="btn  btn-default"
               th:href="@{/fileupdown/tomodifypage(userName=${view.userName},password=${view.password},currentPage=${view.currentPage})}">更新</a>

            <a class="btn btn-default"
               th:href="@{/fileupdown/download(userName=${view.userName},password=${view.password},currentPage=${view.currentPage})}">
                下载</a>

            <a class="btn btn-primary"
               th:href="@{/fileupdown/tobroserfilepage(userName=${view.userName},password=${view.password},currentPage=${view.currentPage})}">查找</a>

            <a class="btn btn-default"
               th:href="@{/fileupdown/toprivilmanagepage(userName=${view.userName},password=${view.password},currentPage=${view.currentPage})}">管理</a>
            <p>

                <div id="">
                    <form id="queryform" th:action="@{/fileupdown/downloadbyquerycondition}" method="post"
                          style="margin-left: 0px;margin-top: 15px;margin-right: 35px;margin-bottom: 15px;">


                        <div>
                            <fieldset>
                                <!--<legend>查询条件</legend>-->
                                <table width="100%">
                                    <tr>
                                        <td align="right">
                                            业务员:
                                        </td>
                                        <td>
                                            <select id="salor" style="width: 120px" name="view.salor" form="form0">
                                                <option value="" selected="selected">请选择业务员</option>
                                                <option value="邹时雨">邹时雨</option>
                                                <option value="胡锋">胡锋</option>
                                                <option value="王世珺">王世珺</option>
                                                <option value="赵彩霞">赵彩霞</option>
                                                <option value="亚晓艾">亚晓艾</option>
                                                <option value="钟源">钟源</option>
                                                <option value="陈小迷">陈小迷</option>
                                                <option value="熊新宇">熊新宇</option>
                                                <option value="潘莉">潘莉</option>
                                                <option value="连鸿业">连鸿业</option>
                                                <option value="刘彩云">刘彩云</option>
                                                <option value="明松">明松</option>
                                                <option value="周涛">周涛</option>
                                                <option value="梁浩">梁浩</option>
                                                <option value="肖昌升">肖昌升</option>
                                                <option value="高玉昕">高玉昕</option>
                                                <option value="吴亚莹">吴亚莹</option>
                                                <option value="何嘉琪">何嘉琪</option>
                                                <option value="李彩苹">李彩苹</option>
                                                <option value="龚菁">龚菁</option>
                                                <option value="李晨">李晨</option>
                                                <option value="梁国程">梁国程</option>
                                                <option value="陈双全">陈双全</option>
                                                <option value="彭亚明">彭亚明</option>
                                                <option value="陈军">陈军</option>

                                            </select>
                                        </td>
                                        <td align="right">订单编码:</td>
                                        <td><input type="text" id="orderno" name="view.orderNo" style="width:150px"
                                                   form="form0"
                                                   onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"/>
                                        </td>
                                        <td align="right"> 顶目编码:</td>
                                        <td><input type="text" id="projectname" name="view.projectName"
                                                   style="width:150px"
                                                   form="form0"
                                                   onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"/>
                                        </td>
                                        <td></td>
                                        <td></td>

                                    </tr>
                                    <tr>
                                        <td align="right">设计师:</td>
                                        <td>
                                            <select id="engineer" style="width: 120px" name="view.engineer">
                                                <option value="0" selected="selected">请选择设计师</option>
                                                <option th:each="c:${userInfos}" th:value="${c.uId}"
                                                        th:text="${c.userName}"></option>
                                            </select>

                                        </td>
                                        <td align="right">文件名称:</td>
                                        <td><input type="text" id="filename" name="view.fileName" style="width:150px"
                                                   form="form0"
                                                   onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"/>
                                        </td>
                                        <td align="right">最新上传时间:</td>
                                        <td colspan="2" th:align="left">
                                            <input type="text" style="width:120px" id="startnewestsavedate"
                                                   readOnly="true"
                                                   name="view.startNewestSaveDate" class="Wdate" form="form0"
                                                   onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"
                                                   onclick="WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'#F{$dp.$D(\'endnewestsavedate\')}'})"/>
                                            至：
                                            <input type="text" id="endnewestsavedate" style="width:120px"
                                                   name="view.endnewestsavedate" class="Wdate" form="form0"
                                                   onkeypress="if(event.keyCode==13) {submitQueryByConditionbutton.click();return false;}"
                                                   onclick="WdatePicker({dateFmt:'yyyy-MM-dd',minDate:'#F{$dp.$D(\'startnewestsavedate\')}'})"/>
                                        </td>

                                        <td th:align="right">
                                            <input type="button" id="submitQueryByConditionbutton"
                                                   onclick="submitQueryByCondition()" value="查询"/>
                                            <!--<input type="button" onclick="exportDataByCondition()" value="导出"/></td>-->
                                    </tr>
                                </table>
                            </fieldset>
                        </div>
                    </form>

            <p>
            <div id="selecradio">

                <input type="radio" name="showmethod" checked value="0" id="listshow" onclick="showlistdiv3()">列表展示
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="radio" name="showmethod" value="1" id="foldershow" onclick="showfolderdiv3()">文件夹展示
            </div>

            <div id="listdiv">
                <div id="downloadpage">
                    <form th:action="@{/fileupdown/downloadbyquerycondition}" method="post" id="form0">
                        <input type="hidden" id="maxPage" th:value="${view.maxPage}">
                        <input type="hidden" id="n_currentPage" name="view.currentPage" th:value="${view.currentPage}"/>
                        <input type="hidden" id="userName" name="view.userName" th:value="${view.userName}">
                        <input type="hidden" id="passWord" name="view.password" th:value="${view.password}">
                        <input type="hidden" id="foldername">
                        <table class="grid" style="width: 100%">
                            <thead style="background-color: #E0EEEE" align="center" id="urlthead">
                            <tr>
                                <td>编号</td>
                                <td>最近设计者</td>
                                <td>最近更新时间</td>
                                <td>订单编码</td>
                                <td>顶目名称</td>
                                <td>文件名称</td>
                                <td>业务员</td>
                                <td>更新次数</td>
                                <td>文件说明</td>
                                <td>备注</td>
                                <td>路径</td>
                            </tr>
                            </thead>
                            <tbody id="showdatatable">
                            <div th:unless="${#lists.isEmpty(downloadViewList)}">
                                <tr th:each="downloadView ,iterStat: ${downloadViewList}" align="center">
                                    <td th:text="${(iterStat.index+1)+(view.currentPage-1)*(view.pageSize)}"></td>
                                    <td th:text="${downloadView.lastUpdator}"></td>
                                    <td th:text="${downloadView.lastUpdateTime}"></td>
                                    <td th:text="${downloadView.orderNo}"></td>
                                    <td th:text="${downloadView.projectName}"></td>
                                    <td align="left" th:text="${downloadView.fileName}"></td>
                                    <td th:text="${downloadView.salor}"></td>
                                    <td th:text="${downloadView.singleFileUpdateNum}"></td>
                                    <td th:text="${downloadView.filedescribtion}"></td>
                                    <td th:text="${downloadView.remark}"></td>
                                    <td align="left" th:text="${downloadView.urlAddr}"></td>
                                </tr>
                            </div>
                            <div th:if="${#lists.isEmpty(downloadViewList)}">
                                <tr>
                                    <td colspan="11" align="center">暂无文件清单信息</td>
                                </tr>
                            </div>
                            </tbody>

                            <tfoot id="s_tfoot">  <!-- 分页-->

                            <tr id="showdiv">

                                <td colspan="11" align="left">
                                    <span>第</span>
                                    <span th:text="${view.currentPage}" id="currentpagespan"> </span>
                                    <span>页|共</span>
                                    <span th:text="${view.maxPage}" id="maxpagespan"> </span>
                                    <span>页|共</span>
                                    <span th:text="${view.recordCount}" id="recordcountspan"> </span>
                                    <span>条记录 </span>
                                    <span id="image01">
                            <span th:if="${view.currentPage gt 1}">
                                    <img src="/images/page/sy-2.jpg" align="middle" border="0"
                                         style="width: 20px; height: 20px; vertical-align: middle"
                                         onClick="goPageone()"/>
                                    <img src="/images/page/syy-2.jpg" align="middle" border="0" onClick="goPrePage()"
                                         style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;

                                </span>
                                </span>
                                    <span id="image02">
                            <span th:if="${view.currentPage le 1}">
                                <img src='/images/page/l-sy-2.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>
                                <img src='images/images/page/l-syy-2.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;
                            </span>
                            </span>
                                    <span id="image03">
                            <span th:if="${view.currentPage lt view.maxPage}">
                                    <img src="/images/page/xyy-2.jpg" align="middle" border="0" onClick="goAftPage()"
                                         style="width: 20px; height: 20px; vertical-align: middle"/>
                                    <img src="/images/page/my-2.jpg" align="middle" border="0" onClick="goMaxPage()"
                                         style="width: 20px; height: 20px; vertical-align: middle"/>
                            </span>
                                </span>
                                    <span id="image04">
                            <span th:if="${view.currentPage ge view.maxPage}">
                                <img src='/images/page/l-xyy-1.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>
                                <img src='/images/page/l-my-1.jpg' align='middle' border='0px'
                                     style="width: 20px; height: 20px; vertical-align: middle"/>
                            </span>
                            </span>

                                    |&nbsp;到第
                                    <input onkeypress="if(event.keyCode==13) {gopage.click();return false;}"
                                           style="width: 50px"
                                           id="_tp" th:name="currentPage" type="text" th:value="${view.currentPage}"/>
                                    页&nbsp;
                                    <img src="/images/page/cx-2.jpg" id="gopage" onClick="goPage2()"
                                         style="width:20px;height:20px;vertical-align:middle">
                                </td>

                            </tr>


                            <tr style="display:none;" id="nodatadiv">
                                <td colspan="11" align="center">
                                    查无数据
                                </td>
                            </tr>


                            </tfoot>
                        </table>
                    </form>

                </div>
            </div>

            <!--FOLDER形式展示DIV-->
            <div id="folderdiv" style="display: none">

                &nbsp;&nbsp;&nbsp;&nbsp;<input type="button" id="backfolder" disabled value="返回上一级"
                                               onclick="backFolder3();">

                &nbsp;&nbsp;&nbsp;&nbsp;
                <div id="innerfolderdiv">
                </div>
            </div>


        </div>

    </div>
</div>

</div>


<script src="/lib/bootstrap/js/bootstrap.js"></script>
<script type="text/javascript">
    var currentPage; //当前页
    var totalPage; //总多少页
    var totaldata; //总共多少记录
    var pageSize;//当前每页多少条
    var username;
    var password;
    function submitQueryByCondition() {
        $("#some-element").busyLoad("show");//遮罩层开启
        var jsonarray = {
            "salor": $("#salor").val(), //业务员
            "engineer": $("#engineer").val(),//设计师
            "orderNo": $("#orderno").val(), //订单编号
            "projectName": $("#projectname").val(), //项目编号
            "fileName": $("#filename").val(), //文件名
            "startNewestSaveDateStr": $("#startnewestsavedate").val(), //查询开始时间
            "endNewestSaveDateStr": $("#endnewestsavedate").val(), //查询结束时间
            "currentPage": $("#n_currentPage").val()
        };
        var data = JSON.stringify(jsonarray);
        $.ajax({
            data: data,
            type: "POST",
            contentType: "application/json",//上传内容格式为json结构
            url: "/fileupdown/browserbyquerycondition",
            success: function (msg) {
                var data = eval(msg);//将msg化为数;
                var num = 0;
                var tr = "";
                var image01 = $("#image01");
                var image02 = $("#image02");
                var image03 = $("#image03");
                var image04 = $("#image04");
                var maxpageid = $("#maxPage");
                var n_currentPage = $("#n_currentPage");
                var inputpage = $("#_tp");
                image01.html("");
                image02.html("");
                image03.html("");
                image04.html("");
                var td = "";
                var tbody = $("#showdatatable");
                var tfoot = $("#s_tfoot");
                tbody.html("");
                if (data != null && data != "") {
                    $("#nodatadiv").hide();
                    $("#showdiv").show();
                    currentPage = data[0].currentPage; //当前页
                    totalPage = data[0].maxPage; //总多少页
                    totaldata = data[0].recordCount; //总共多少记录
                    username = data[0].userName;
                    password = data[0].userPwd;
                    pageSize = data[0].pageSize;
                    maxpageid.val(totalPage);
                    n_currentPage.val(currentPage);
                    inputpage.val(currentPage);
                    $.each(data, function (num) {
                        tr = $("<tr id='" + data[num].id + "'></tr>");
                        tr.append("<td>" + ((num + 1) + ((n_currentPage.val() - 1) * pageSize)) + "</td>");
                        tr.append("<td>" + isNull(data[num].lastUpdator) + "</td>");
                        tr.append("<td>" + isNull(data[num].lastUpdateTime) + "</td>");
                        tr.append("<td>" + isNull(data[num].orderNo) + "</td>");
                        tr.append("<td>" + isNull(data[num].projectName) + "</td>");
                        tr.append("<td>" + isNull(data[num].fileName) + "</td>");
                        tr.append("<td>" + isNull(data[num].salor) + "</td>");
                        tr.append("<td>" + isNull(data[num].singleFileUpdateNum) + "</td>");
                        tr.append("<td>" + isNull(data[num].filedescribtion) + "</td>");
                        tr.append("<td>" + isNull(data[num].remark) + "</td>");
                        tr.append("<td>" + isNull(data[num].urlAddr) + "</td>");
                        tr.appendTo(tbody);
                    });
                    $("#currentpagespan").html(currentPage);
                    $("#maxpagespan").html(totalPage);
                    $("#recordcountspan").html(totaldata);
                    if (currentPage > 1) {
                        var imange01str = '<img src="/images/page/sy-2.jpg"  onClick="goPageone()"  align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                        imange01str += '<img src="/images/page/syy-2.jpg" onClick="goPrePage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                        image01.html(imange01str);
                    } else {
                        image01.html("");
                    }
                    if (currentPage <= 1) {
                        var image02str = '<img src="/images/page/l-sy-2.jpg" align="middle" border="0px"';
                        image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                        image02str += ' <img src="/images/page/l-syy-2.jpg" align="middle" border="0px"';
                        image02str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                        image02.html(image02str);
                    } else {
                        image02.html("");
                    }
                    if (currentPage < totalPage) {
                        var imange03str = '<img src="/images/page/xyy-2.jpg" onClick="goAftPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/> </a>';
                        imange03str += '<img src="/images/page/my-2.jpg" onClick="goMaxPage()" align="middle" border="0" style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp; </a>';
                        image03.html(imange03str);
                    } else {
                        image03.html("");
                    }
                    if (currentPage >= totalPage) {
                        var image04str = '<img src="/images/page/l-xyy-1.jpg" align="middle" border="0px"';
                        image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>';
                        image04str += ' <img src="/images/page/l-my-1.jpg" align="middle" border="0px"';
                        image04str += ' style="width: 20px; height: 20px; vertical-align: middle"/>&nbsp;&nbsp;';
                        image04.html(image04str);
                    } else {
                        image04.html("");
                    }
                } else {
                    $("#nodatadiv").show();
                    $("#showdiv").hide();
                }
                // 隐藏loading
                $("#some-element").busyLoad("hide");
            },
            error: function (msg) {
                // 隐藏loading
                $("#some-element").busyLoad("hide");
                alert("失败");
            }
        });
    }
    function exportDataByCondition() {
        alert("此功能暂未做")
    }
    function goPageone() {
        $("#n_currentPage").val(1);
        submitQueryByCondition();
    }
    function goPrePage() {
        var currentpage = $("#_tp").val();
        $("#n_currentPage").val(currentpage * 1 - 1 * 1);
        submitQueryByCondition();
    }
    function goAftPage() {
        var currentpage = $("#_tp").val();
        $("#n_currentPage").val(currentpage * 1 + 1 * 1);
        submitQueryByCondition();
    }
    function goMaxPage() {
        $("#n_currentPage").val($("#maxPage").val());
        submitQueryByCondition();
    }
    function goPage2() {
        var tp = document.getElementById("_tp").value;//currentPage
        var max = $("#maxPage").val(); //maxPage
        tp = tp.trim();
        var r = /^\+?[0-9][0-9]*$/;
        if (!(r.test(tp))) {
            alert("页数输入有误，请重新输入!");
            $("#_tp").val(max);
            return false;
        } else if (parseInt(tp) == 0) {
            alert("页数必须大于0!");
            $("#_tp").val(max);
            return false;
        } else if (parseInt(tp) > parseInt(max)) {
            alert("不能大于总页数!");
            $("#_tp").val(max);
            return false;
        } else {
            $("#n_currentPage").val(tp);
            // document.forms["form0"].submit();
            submitQueryByCondition();
        }
    }
    function goAjaxPage(strCount) {
        switch (strCount) {
            case "0":
                if (currentPage == 1)
                    return;
                else
                    currentPage = 1;
                break;
            case "-1":
                if (currentPage == 1)
                    return;
                if (currentPage != 1)
                    currentPage = parseInt(currentPage) - 1;
                break;
            case "1":
                if (currentPage == totalPage)
                    return;
                if (currentPage != totalPage)
                    currentPage = parseInt(currentPage) + 1;
                break;
            case "end":
                if (currentPage == totalPage)
                    return;
                if (currentPage != totalPage)
                    currentPage = totalPage;
                break;
            case "_go":
                var _page = $("#_tp2").val();
                if (!isInt(_page)) {
                    alert("请输入正整数!");
                    return;
                }
                if (_page <= 0) {
                    alert("页数必须大于0!");
                    return;
                }
                if (parseInt(_page) > parseInt(totalPage)) {
                    alert("不能大于总页数!");
                    return;
                }
                currentPage = $("#_tp2").val();
                break;
            default:
                break;
        }
        if (totalPage) {
            $("#n_currentPage").val(currentPage);
            querySupplierPage();
        }
    }
    function clickButton(event) {
        if (event.keyCode == 13) {
            goAjaxPage("_go");
            return false;
        }
    }
    function isNull(arg1) {
        if (arg1 == "null" || arg1 == null) {
            return "";
        }
        return arg1;
    }
    //验证正整数
    function isInt(str) {
        var re = /^[0-9]*[1-9][0-9]*$/;
        return re.test(str);
    }
    $("[rel=tooltip]").tooltip();
    $(function () {
        $('[data-popover="true"]').popover({html: true});
        $('.demo-cancel-click').click(function () {
            return false;
        });
    });
</script>


</body>
</html>